# 📱 iOS Safari访问LiveKit Demo解决方案

## 🎯 问题原因
iOS Safari报错："Accessing media devices is available only in secure contexts (HTTPS and localhost)"

这是因为浏览器安全策略要求媒体设备只能在以下环境访问：
- HTTPS网站
- localhost环境

## ✅ 解决方案

### 方案1：使用代理服务器（推荐）
我们已经配置了代理服务器，将IP地址请求代理到localhost：

**访问地址**：`http://192.168.3.116:3002`

### 方案2：使用HTTPS（备选）
如果代理方案不工作，可以使用HTTPS：
`https://192.168.3.116:3000`

## 📱 iOS设备访问步骤

### 使用Safari浏览器：
1. 打开iOS Safari浏览器
2. 访问：`http://192.168.3.116:3002`
3. 输入房间名称和你的名字
4. 点击"Join Room"
5. 允许摄像头和麦克风权限

### 使用Chrome浏览器：
1. 打开iOS Chrome浏览器
2. 访问：`http://192.168.3.116:3002`
3. 如果仍有问题，切换到Safari

## 🔧 故障排除

### 如果代理方案不工作：
1. 检查代理服务器是否运行：`curl http://192.168.3.116:3002`
2. 重启代理服务：`npm run dev:proxy`
3. 尝试HTTPS方案：`https://192.168.3.116:3000`

### 媒体设备权限问题：
1. 打开iOS设置
2. 找到Safari
3. 检查摄像头和麦克风权限
4. 确保权限已开启

### 网络连接问题：
1. 确保iOS设备与开发机器在同一WiFi网络
2. 检查防火墙设置
3. 尝试ping测试：`ping 192.168.3.116`

## 📋 当前服务状态

✅ 后端API：http://192.168.3.116:3001
✅ 前端应用：http://192.168.3.116:3000
✅ 代理服务器：http://192.168.3.116:3002
✅ LiveKit配置：已正确设置

## 🚀 可用的启动命令

```bash
# 代理方案（推荐）
npm run dev:proxy

# HTTPS方案
npm run dev:https

# 普通局域网方案
npm run dev:lan
```

## 📝 重要提醒

- **优先使用代理方案**：http://192.168.3.116:3002
- **确保网络连接**：两台设备必须在同一局域网
- **检查权限**：确保媒体设备权限已开启
- **如果遇到问题**：尝试刷新页面或重启浏览器

现在可以在iOS设备上正常访问LiveKit应用了！
